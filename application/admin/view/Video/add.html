{extend name="Public/index"/}
{block name="title"}添加{$category.cname}|上海麦西西后台管理系统{/block} 
{block name="header"}添加{$category.cname}{/block}
{block name="nav"}<a href="{:url('video/index',['cid'=>$category['cid']])}"  class="tip-bottom">{$category.cname}管理</a><a href="#" class="current">添加{$category.cname}</a>{/block}
{block name="content"}
<div class="container">
	<div class="row-fluid">
		<div class="span10">
			<div class="widget-box">
				<div class="widget-title">
					<span class="icon">
						<i class="icon-pencil"></i>
					</span>
					<h5>添加{$category.cname}</h5>
				</div>
				<div class="widget-content nopadding">
                    <ul class="nav nav-tabs">
                      <li class="active"><a href="#home" data-toggle="tab" aria-expanded="false">网络分享</a></li>
                      <li class=""><a href="#profile" data-toggle="tab" aria-expanded="false">本地上传</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content">
                        <div class="tab-pane fade active in"  id="home">
                        <form class="form-horizontal" method="post" action="{:url('video/add')}" enctype="multipart/form-data">
                                            <input type="hidden" name="cid" value="{$category.cid}">
						                    <div class="control-group">
                                                <label for="normal" class="control-label">标题</label>
                                                <div class="controls">
                                                <input type="text" name="title">
                                                </div>
                                            </div>
 
                                            <div class="control-group">
                                                <label for="normal" class="control-label">简介</label>
                                                <div class="controls">
                                                    <textarea name="intro" rows="4"></textarea>
                                                </div>
                                            </div>

                                            <div class="control-group">
                                                <label for="normal" class="control-label">视频上传</label>
                                                <div class="controls">
                                                    <input type="hidden" name="flag" value="0"/>
                                                    <textarea name="vidurl" rows="4"></textarea>      
                                                </div>
                                            </div>
 
                                            <div class="control-group">
                                                <label class="control-label">上传图片</label>
                                                <div class="controls">
                                                <div class="alert alert-warning">提示：上传图片大小：宽830px、高550px</div>
                                                <input type="file" id="imgWeb" name="imgurl"/>
				                                <div id="showImg" class="preview"></div>                             
                                                </div>
                                                <style>
                                                    .preview{margin-top: 20px; position: relative; width: 450px;height: 250px;}
                                                    .preview .item{position: absolute; width: 450px; height: 250px;}
                                                    .preview img{max-width: 450px;max-height: 250px;cursor: url(../images/big.cur), auto;  box-shadow: 0px 1px 1px 1px #AAA3A3;}
                                                    .preview img:hover{box-shadow: 0px 1px 1px 2px #83ABD2;}
                                                    .preview .big{z-index: 2;}
                                                    .preview .big img{max-width: none; max-height: none; cursor: url(../images/small.cur), auto;box-shadow: 2px 2px 10px 2px #666;}
                                                </style>
                                                    <script type="text/javascript">
                                                    var Upload = (function(){
                                                        var upimg = document.getElementById('imgWeb');
                                                        var show  = document.getElementById('showImg');
 
                                                        function init(){
                                                            if(!(window.FileReader && window.File && window.FileList && window.Blob)){
                                                                show.innerHTML = '您的浏览器不支持fileReader';
                                                                upimg.setAttribute('disabled', 'disabled');
                                                                return false;
                                                            }
                                                            handler();
                                                        }
 
                                                        function handler(){
                                                            upimg.addEventListener('change', function(e){
                                                                var files = this.files;
                                                                if(files.length){
                                                                    checkFile(this.files);
                                                                }
                                                            });
                                                        }
 
        
                                                        function checkFile(files){
        	                                                var file = files[0];
        	                                                var reader = new FileReader();
        	                                                // show表示<div id='show'></div>，用来展示图片预览的
        	                                                if(!/image\/\w+/.test(file.type)){
                                                                show.innerHTML = "请确保文件为图像类型";
                                                                return false;
                                                            }
                                                            // onload是异步操作
        	                                                reader.onload = function(e){
        		                                                show.innerHTML = '<img src="'+e.target.result+'" alt="img">';
        	                                                }
        	                                                reader.readAsDataURL(file);
                                                        }
                                                        return {
                                                            init : init
                                                        }
                                                    })();
                                                    Upload.init();
                                                    </script>
                                            </div>

                                            <div class="control-group">
                                                    <label for="normal" class="control-label">发表时间：</label>
                                                    <div class="controls">
                                                    <input type="datetime-local" name="createDate" value="{$time}"/>
                                                    </div>
                                            </div>		
                        
                                            <div class="control-group">                   
                                                <div class="controls">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" name="ishome">放到首页
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                        					
						                    <div class="form-actions">
								                    <input  class="btn btn-primary" type="reset" value="重置" />
								                    <input  class="btn btn-primary" type="submit" value="提交" />					
						                    </div>
								
					                    </form>
                        </div>
                        <div class="tab-pane fade"  id="profile">
                        <form class="form-horizontal" method="post" action="{:url('video/add')}" enctype="multipart/form-data">
                                            <input type="hidden" name="cid" value="{$category.cid}">
						                    <div class="control-group">
                                                <label for="normal" class="control-label">标题</label>
                                                <div class="controls">
                                                <input type="text" name="title">
                                                </div>
                                            </div>
 
                                            <div class="control-group">
                                                <label for="normal" class="control-label">简介</label>
                                                <div class="controls">
                                                    <textarea name="intro" rows="4"></textarea>
                                                </div>
                                            </div>

                                            <div class="control-group">
                                                <label for="normal" class="control-label">视频上传</label>
                                                <div class="controls">
                                                    <input type="hidden" name="flag" value="1"/>
                                                    <input type="file" name="vidurl"/>
                                                </div>
                                            </div>
 
                                            <div class="control-group">
                                                <label class="control-label">上传图片</label>
                                                <div class="controls">
                                                <div class="alert alert-warning">提示：上传图片大小：宽830px、高550px</div>
                                                <input type="file" id="imageUpload" name="imgurl"/>
				                                <div id="preview" class="preview"></div>                             
                                                </div>
                                                <style>
                                                    .preview{margin-top: 20px; position: relative; width: 450px;height: 250px;}
                                                    .preview .item{position: absolute; width: 450px; height: 250px;}
                                                    .preview img{max-width: 450px;max-height: 250px;cursor: url(../images/big.cur), auto;  box-shadow: 0px 1px 1px 1px #AAA3A3;}
                                                    .preview img:hover{box-shadow: 0px 1px 1px 2px #83ABD2;}
                                                    .preview .big{z-index: 2;}
                                                    .preview .big img{max-width: none; max-height: none; cursor: url(../images/small.cur), auto;box-shadow: 2px 2px 10px 2px #666;}
                                                </style>
                                                    <script type="text/javascript">
                                                    var Upload = (function(){
                                                        var upimg = document.getElementById('imageUpload');
                                                        var show  = document.getElementById('preview');
 
                                                        function init(){
                                                            if(!(window.FileReader && window.File && window.FileList && window.Blob)){
                                                                show.innerHTML = '您的浏览器不支持fileReader';
                                                                upimg.setAttribute('disabled', 'disabled');
                                                                return false;
                                                            }
                                                            handler();
                                                        }
 
                                                        function handler(){
                                                            upimg.addEventListener('change', function(e){
                                                                var files = this.files;
                                                                if(files.length){
                                                                    checkFile(this.files);
                                                                }
                                                            });
                                                        }
 
        
                                                        function checkFile(files){
        	                                                var file = files[0];
        	                                                var reader = new FileReader();
        	                                                // show表示<div id='show'></div>，用来展示图片预览的
        	                                                if(!/image\/\w+/.test(file.type)){
                                                                show.innerHTML = "请确保文件为图像类型";
                                                                return false;
                                                            }
                                                            // onload是异步操作
        	                                                reader.onload = function(e){
        		                                                show.innerHTML = '<img src="'+e.target.result+'" alt="img">';
        	                                                }
        	                                                reader.readAsDataURL(file);
                                                        }
                                                        return {
                                                            init : init
                                                        }
                                                    })();
                                                    Upload.init();
                                                    </script>
                                            </div>

                                            <div class="control-group">
                                                    <label for="normal" class="control-label">发表时间：</label>
                                                    <div class="controls">
                                                    <input type="datetime-local" name="createDate" value="{$time}"/>
                                                    </div>
                                            </div>		
                        
                                            <div class="control-group">                   
                                                <div class="controls">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" name="ishome">放到首页
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                        					
						                    <div class="form-actions">
								                    <input  class="btn btn-primary" type="reset" value="重置" />
								                    <input  class="btn btn-primary" type="submit" value="提交" />					
						                    </div>
								
					                    </form>
                        </div>
                    </div>
				</div>
			</div>
		</div>
	</div>
</div>
 
{/block}
